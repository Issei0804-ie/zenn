---
title: "Laravel v11.0.3 ã¾ã¨ã‚"
emoji: "ğŸ“˜"
type: "tech"
topics:
  - "php"
  - "laravel"
  - "laravel11"
published: true
published_at: "2024-10-02 01:01"
---

30minã§èª­ã‚ã‚‹ã ã‘èª­ã‚“ã ã®ã§ã€å…¨éƒ¨ã®ãƒªãƒªãƒ¼ã‚¹ã¯ã¾ã¨ã‚ãã‚Œã¦ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¯[ã“ã¡ã‚‰](https://github.com/laravel/framework/releases/tag/v11.0.3)

- [11.x] Arr helper map spread by @bilfeldt in #50474
- [11.x] add list rule by @medilies in #50454
- [11.x] Fixes installation of passport by @nunomaduro in #50488

### [11.x] Arr helper map spread by @bilfeldt in #50474
Collectionã®mapSpreadã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’Arrãƒ˜ãƒ«ãƒ‘ãƒ¼ã«å®Ÿè£…ã—ãŸã‚‰ã—ã„ã€‚
ãã‚‚ãã‚‚mapSpreadã‚’ä½¿ã£ãŸã“ã¨ãŒãªã„ã®ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ã¿ã‚‹ã€‚
https://laravel.com/docs/11.x/collections#method-mapspread

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã¡ã‚‡ã£ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½è¨˜ã—ãŸã®ãŒä¸‹è¨˜ã€‚

```
$collection = collect([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]);
 
$chunks = $collection->chunk(2);

// ä¸­èº«ãŒæƒ³åƒã§ããªã‹ã£ãŸã®ã§åãå‡ºã—ã¦ã¿ãŸ
/**
 * [
 *  [
 *      0,
 *      1,
 *  ],
 *  [
 *      2 => 2,
 *      3 => 3,
 *  ],
 *  [
 *      4 => 4,
 *      5 => 5,
 *  ],
 *  [
 *      6 => 6,
 *      7 => 7,
 *  ],
 *  [
 *      8 => 8,
 *      9 => 9,
 *  ],
 * ]
 */

$sequence = $chunks->mapSpread(function (int $even, int $odd) {
    return $even + $odd;
});
 
$sequence->all();
 
// [1, 5, 9, 13, 17]
```

chunkãŒé€£æƒ³é…åˆ—ã¨é…åˆ—ãŒæ··ã˜ã£ãŸä¸æ€è­°ãªæŒ™å‹•ã™ã‚‹ãª...
ã¾ã‚ã€å˜ç´”ã«collectionã®ä¸­ã®collectionã«å¯¾ã—ã¦ãã‚Œãã‚Œæ“ä½œã‚’è¡Œãªã£ã¦æ–°ã—ã„collectionã‚’ä½œã‚‹æ„Ÿã˜ã‚‰ã—ã„ã§ã™ã€‚

ãã‚Œã®Arrayãƒ˜ãƒ«ãƒ‘ãƒ¼ã§ã®å®Ÿè£…ãŒã“ã®PRã€‚
ã¡ãªã¿ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ä½¿ã„æ–¹ã‚‚è¿½åŠ ã—ã¦ã„ã¦ã€chunkä½¿ã£ã¦ãªã„åˆ†ã“ã£ã¡ã®æ–¹ãŒã‚ã‹ã‚Šã‚„ã™ã„ã‹ã‚‚ã€‚
https://laravel.com/docs/11.x/helpers#method-array-map-spread

### [11.x] add list rule by @medilies in #50454

Validationã®ãƒ«ãƒ¼ãƒ«ã§ã€`array`ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ãŒå­˜åœ¨ã™ã‚‹ãŒã€`array`ã ã¨ä¸‹è¨˜ã®1ã¨2ã®ã©ã¡ã‚‰ã‚‚ãƒ‘ã‚¹ã—ã¦ã„ãŸã€‚æ–°ãŸã«ä½œã‚‰ã‚ŒãŸ`list`ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã ã¨ã€2ã ã‘ã—ã‹ãƒ‘ã‚¹ã—ãªããªã‚‹ã€‚

```
1. ['foo' => [1 => 1, 2 => 2]]
2. ['foo' => [1, 2, 3]]
```

### [11.x] Fixes installation of passport by @nunomaduro in #50488

ä»Šã¾ã§ã®æ›¸ãæ–¹ã ã¨ã€`sail artisan install:api --passport` å®Ÿè¡Œæ™‚ã«passportãŒã¾ã ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã£ãŸãŸã‚ã€è½ã¡ã¦ã„ãŸã£ã½ã„ã€‚

ã¨ã„ã†ã®ã‚‚ã€passportãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã€ã“ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«æœ€åˆã®æ–¹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚ãŸã ã€ãã®ã¾ã¾`$this->call('passport:install')`ã§passportã‚’å‘¼ã³å‡ºãã†ã¨ã—ã¦ã‚‚å…ƒã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ãƒ‘ã‚¹ãƒãƒ¼ãƒˆãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸå¾Œã®autoloadã‚’èª­ã¿å–ã‚Œã¦ãªã„ã®ã§ãƒã‚°ã‚‹ã£ã½ã„ï¼Ÿ(autoloadã®èªè­˜ãŒé›‘ãªã®ã§é–“é•ã£ã¦ã„ãŸã‚‰ã™ã¿ã¾ã›ã‚“)

#### å†ç¾ã—ã¦ã¿ãŸ

ã¾ãšã¯é©å½“ã«Laravelã®ç’°å¢ƒã‚’ç”¨æ„ã—ã¦ã€`composer.json`ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹Laravelã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’`v11.0.2`ã«å›ºå®šã™ã‚‹ã€‚

```
--- a/composer.json
+++ b/composer.json
@@ -7,7 +7,7 @@
     "require": {
         "php": "^8.2",
         "inertiajs/inertia-laravel": "^1.3",
-        "laravel/framework": "^11.9",
+        "laravel/framework": "11.0.2",
         "laravel/tinker": "^2.9"
     },
```

ãã®ã¾ã¾`sail artisan install:api --passport`ã¨å…¥åŠ›ã™ã‚‹ã€‚

```
$ sail artisan install:api --passport
(çœç•¥)
 Would you like to use UUIDs for all client IDs? (yes/no) [no]:
 > yes


   ERROR  There are no commands defined in the "passport" namespace.
```

ã“ã‚“ãªæ„Ÿã˜ã§è½ã¡ã‚‹ã€‚

ã“ã‚ŒãŒ`v11.0.3`ã ã¨ä¿®æ­£ã•ã‚Œã¦ã„ã‚‹ã€‚
ä¿®æ­£ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚
ãŸã ã€ã™ã§ã«passportãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã¨ãã‚‚ãã‚‚ãƒã‚°ãŒå†ç¾ã—ãªã„ã®ã§ã€ä¸€æ—¦vendorã¯å¹ãé£›ã°ã—ã¦ã‚‚ã†ä¸€åº¦`git reset --hard && git clean -fd && composer install`ãªã©ã‚’ã‹ã‘ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä¸Šè¨˜ã®è«¸ã€…ã‚’ã‚„ã£ãŸã‚ã¨ã€Laravelã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’v11.0.3ã«å›ºå®šã—ã¦ã€

```
$ sail artisan install:api --passport

 Would you like to use UUIDs for all client IDs? (yes/no) [no]:
 > yes

   INFO  API scaffolding installed. Please add the [Laravel\Passport\HasApiTokens] trait to your User model.
```

ãƒãƒƒãƒãƒªç›´ã£ã¦ã¾ã™ã­ã€‚